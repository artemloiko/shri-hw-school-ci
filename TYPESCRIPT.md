# Домашка по Typescript

## Детали по запуску проекта описаны в корневом [readme](./README.md)

#### Добавьте тайпинги к библиотекам, которые поставляются без деклараций типов.

В файле client/src/ansi-to-html.d.ts описаны минимальные типы для работы с библиотекой ansi-to-html.

#### Сгенерируйте тайпинги для использованных внешних API (например, через Swagger)

Я попробовал автоматизировать генерацию типов, но возникла куча проблем вообще с генерацией типов.  
https://github.com/manifoldco/swagger-to-ts - написано на гитхаб что поддерживает v3, но по факту кидает ошибку на v3  
https://github.com/koshevy/codegena - просто кидает непонятную ошибку trim of undefined, попробовал на разных версиях ноды одно и тоже =(  
https://github.com/swagger-api/swagger-codegen - слишком много проблем с автоматизацией этого варианта, особенно на винде.

В итоге описал типы на основании сгенерированных через swagger-codegen, потому что у него получилось поломанные типы.

## About (Описание моих решений)

На клиенте прикручен typescript eslint, вот только он не включен в сборку, т.к. почему-то не хочет подтягивать необходимые правила. Поэтому я написал отдельный npm script `npm run lint` для запуска typescript eslint.

**#warning**
После перевода клиента на TS возникла огромная проблема с SSR. До этого все это компилилось через runtime babel. Теперь я попробовал использовать компилятор TS, но уперся в проблему абсолютных импортов и импорта стилей. С абсолютными импортами проблему решил заменив их на относительные, но вот стили typescript по прежнему компилировать не умеет.
В итоге отключил временно SSR, чтобы успеть что-то сдать до дедлайна, после дедлайна подумаю как его вернуть уже с TS. Скорее всего прийдется поменять архитектуру проекта и запилить собственную сборку вебпаком сервера и клиента.

#### Трудоёмкость перевода проекта на TypeScript. Самые сложные моменты в работе.

Самое сложное это SSR который пришлось даже временно отключить.
Плюс довольно много проблем доставили юнит тесты, так как в тестах
у меня было большое кол-во моков пришлось править кучу ошибок TS.

#### Какие в процессе перевода были найдены ошибки.

Пару раз передавал параметр не проверяя его и были ошибки в параметрах инпута.  
Так же были найдены некоторые архитектурные ошибки, устройство стора, пришлось его немного изменить чтобы удобно было описать его TS.

### Решили ли вы вливать данный PR, или предпочитаете работать с JavaScript? Почему?

Определенно буду вливать, мне нравится TS. Я работал с разными проектами и когда ты приходишь в проект с TS, разобраться в нем довольно просто.
Плюс ты можешь вернуться в свой же проект спустя время и гораздо проще вспомнить как все устроено, во время переписывания стора на TS я с этим столкнулся, из кода вообще не очевидно какая у него структура пришлось запускать приложение и смотреть уже специально через девтулзы как он выглядит.  
Так же нравится гораздо более крутой intellisense при работе с TS.
